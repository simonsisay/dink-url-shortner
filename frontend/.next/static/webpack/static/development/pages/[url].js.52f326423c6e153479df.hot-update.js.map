{"version":3,"file":"static/webpack/static/development/pages/[url].js.52f326423c6e153479df.hot-update.js","sources":["webpack:///./pages/[url].js"],"sourcesContent":["import { withApollo } from \"react-apollo\";\nimport { useRouter } from \"next/router\";\nimport LinkNotFound from \"../src/component/LinkNotFound\";\nimport { useState, useEffect } from \"react\";\nimport { gql } from \"apollo-boost\";\n\nconst GET_ORIGINAL = gql`\n  query GetOriginal($short: String!) {\n    getOriginal(short: $short) {\n      id\n      original\n    }\n  }\n`;\n\nconst Redirect = ({ client }) => {\n  const [err, setErr] = useState(true);\n  const [redirecting, setRedirecting] = useState(true);\n  const { url } = useRouter().query;\n\n  useEffect(() => {\n    const redirect = async () => {\n      try {\n        const { data } = await client.query({\n          query: GET_ORIGINAL,\n          variables: { short: url }\n        });\n        if (data) {\n          window.location.replace(data.getOriginal.original);\n        }\n      } catch (err) {\n        setRedirecting(false);\n        setError(true);\n      }\n    };\n    redirect();\n  }, []);\n\n  if (redirecting) return null;\n  if (err) return <LinkNotFound />;\n};\n\nexport default withApollo(Redirect);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AAQA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAKA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAFA;AACA;AAHA;AAAA;AAEA;AACA;AAGA;AACA;AACA;AACA;AATA;AAAA;AACA;AADA;AAAA;AAAA;AAUA;AACA;AACA;AAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAaA;AACA;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;;;;A","sourceRoot":""}